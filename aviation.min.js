/* Aviation - URL routing inspired by express for the frontend! | v3.0.0 | Written by Devang Srivastava | MIT License */
function Aviation(e){if(!(this instanceof Aviation))return new Aviation(e);"object"!=typeof e&&(e={strict:!1,caseSensitive:!1});var t=[],n=this,r=document.querySelector(e.contentWrapper||"body"),o=e.onError||function(e){console.error(e)};this.on=function(r,o){var a=r,i=o,c=[];if("*"==a&&(a=/^.*$/),o||(i=r,a=/^.*$/),!(a instanceof RegExp)){if(a.constructor==Array||a.constructor==Object){for(var s in a)n.use(a[s],o);return n}a=String(a);var p="",u=document.createElement("a");u.href=a,a=u.pathname,e.strict||(a=a.replace(/\/$/,"")),e.caseSensitive||(p="i"),e.removeFromPath&&(a=a.replace(e.removeFromPath,"")),/\:/.test(a)?(a=a.replace(/\*+/g,"").replace(/:([^\/]+)/g,function(e,t){return c.push(t),"([^\\/]+?)"}),a=new RegExp("^"+a.split("([^\\/]+?)").map(function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}).join("([^\\/]+?)")+"$",p)):a=new RegExp("^"+a.split(/\*+/).map(function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}).join(".*")+"$",p)}return t.push({path:a,keys:c,fn:i}),n},this.use=this.on,this.handle=function(c,s){var p="string"==typeof c?c:c.target?c.target.getAttribute("href"):c.href?c.href:this.href?this.href:this.action?this.action:"/",u=document.createElement("a");u.href=p;var l=u.pathname;e.strict||(l=l.replace(/\/$/,"")),e.removeFromPath&&(l=l.replace(e.removeFromPath,""));var f=[];for(var h in t){var m=t[h];if(m.path&&m.path.test(l)){var d={},v=l.match(m.path).slice(1);if(m.keys.length)for(var h in v)d[m.keys[h]]=v[h];f.push({fn:m.fn,params:d})}}if(!f.length)return n;c.preventDefault&&c.preventDefault(),l&&"/"===l[0]||(l="/"+(l||""));var g={url:u.href,hostname:u.hostname,path:l,protocol:u.protocol?u.protocol.replace(":",""):null,secure:!1,query:a(u.href),params:{},cookies:i(),aviation:n};"https"==g.protocol&&(g.secure=!0);var y={cookie:function(e,t,n){return n||(n={}),g.cookies[e]=t,void 0===n.maxAge&&void 0===n.expires&&(n.maxAge=2628e3),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+(n.maxAge?";max-age="+encodeURIComponent(n.maxAge):"")+(n.expires?";expires="+encodeURIComponent(n.expires):"")+(n.path?";path="+encodeURIComponent(n.path):";path")+(n.domain?";domain="+encodeURIComponent(n.domain):"")+(n.secure?";secure="+encodeURIComponent(n.secure):"")+(n.sameSite?";samesite="+encodeURIComponent(n.sameSite):""),this},clearCookie:function(e,t){return t.maxAge=-1,this.cookie(e,null,t),delete g.cookies[e],this},location:function(e){var t=!0;return n.handle({href:e,preventDefault:function(){t=!1}}),t&&(window.location=e),this},redirect:function(e){return this.location(e)},page:function(t,n){return"undefined"!=typeof history&&history.pushState&&!1!==e.changeURL&&!0!==s&&history.pushState({url:n||g.url},t,n||g.url),document.querySelector("title").innerText=t,this},html:function(e){return r.innerHTML=e,this}},R=function(e){try{if(e)throw e;var t=f[++h];if(!t)return;g.params=t.params;var n=t.fn(g,y,R);n&&n.catch&&n.catch(function(e){o(e,g,y,R)})}catch(e){o(e,g,y,R)}};h=-1;return R(),n},!0!==e.skipOnLoad&&document.addEventListener(e.loadEvent||"DOMContentLoaded",function(){n.handle(window.location)}),(e.eventWrapper||document).addEventListener(e.event||"click",function(t){t.target.matches(e.source||"a[href]:not([target='_blank'])")&&n.handle(t)}),!0!==e.skipPopstate&&!1!==e.changeURL&&window.addEventListener("popstate",function(e){n.handle(e.state.url,!0)},!1);var a=function(e){if(!/\?/.test(e))return{};var t={},n=e.split("?")[1].split("&");for(var r in n){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t},i=function(){var e={},t=document.cookie.split(";");for(var n in t){var r=t[n].split("=");r[0]&&r[1]&&(e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]))}return e}}Aviation.element=function(){var e=arguments,t="div",n=!1;e[0]&&"string"==typeof e[0]&&(t=e[0],delete e[0]),e[1]&&"object"==typeof e[1]&&(n=e[1],delete e[1]);var r=document.createElement(t);if(n){if(n.className&&(n.class=n.className,delete n.className),n.style&&n.style.constructor==Object){for(var o in n.style)r.style[o]=n.style[o];delete n.style}for(var o in n)r.setAttribute(o,n[o])}for(var a in e)e[a]&&e[a].isAviationElement||(e[a]=Aviation.safe(e[a])),r.append(e[a]);return r.isAviationElement=!0,r},Aviation.safe=function(e){return e?e=String(e).replace(/\&/gi,"&amp;").replace(/\</gi,"&lt;").replace(/\>/gi,"&gt;").replace(/\"/gi,"&quot;").replace(/\'/gi,"&#x27;").replace(/\//gi,"&#x2F;"):""};
